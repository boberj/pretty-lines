(function(t){function e(e){for(var a,o,c=e[0],i=e[1],u=e[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/pretty-lines/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=i;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("289d"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[n("Header")],1),n("main",[n("PrettyLines")],1),n("footer",[n("Footer")],1)])},o=[],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div",{staticClass:"content has-text-centered"},[n("p",[t._v(" Daily is smoothed using a 7 day moving average ")]),n("p",[n("a",{attrs:{href:"data-sources.html"}},[t._v("Data Sources")]),t._v(" | "),n("a",{attrs:{href:"https://github.com/boberj/pretty-lines/"}},[t._v("GitHub Repository")])])])])}],u=n("2877"),l={},d=Object(u["a"])(l,c,i,!1,null,"0b936543",null),f=d.exports,v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("nav",{staticClass:"top-nav"},[n("div",{staticClass:"container"},[n("div",{staticClass:"nav-wrapper"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"},[n("h1",{staticClass:"header-text"},[t._v("COVID-19")])])])])])])])}],h=(n("f73f"),{}),m=Object(u["a"])(h,v,p,!1,null,"3d580e96",null),b=(m.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pretty-lines"},[t.loading?n("div",{staticClass:"section"},[t._m(0)]):n("div",{staticClass:"section"},[n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half is-offset-one-quarter"},[n("Autocomplete",{attrs:{options:t.autocompleteOptions},on:{selected:t.addArea}}),n("div",{staticClass:"tags-container"},[n("div",{staticClass:"field is-grouped is-grouped-multiline"},t._l(t.selectedAreas,(function(e){return n("div",{key:e.id,staticClass:"control"},[n("div",{staticClass:"tags has-addons"},[n("span",{staticClass:"tag",style:{backgroundColor:t.strokeColor(e.id)}}),n("span",{staticClass:"tag"},[t._v(" "+t._s(e.area.value)+" ")]),n("a",{staticClass:"tag is-delete",on:{click:function(n){return t.removeArea(e.id)}}})])])})),0)])],1)])]),n("div",{staticClass:"container"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("Chart",{attrs:{data:t.chartData,controls:t.controls}})],1)])]),n("div",{staticClass:"columns is-centered is-vcentered"},[n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"field"},[n("b-checkbox",{model:{value:t.controls.logScale,callback:function(e){t.$set(t.controls,"logScale",e)},expression:"controls.logScale"}},[t._v(" Log scale ")])],1)]),n("div",{staticClass:"column is-narrow"},[n("div",{staticClass:"field"},[n("b-checkbox",{model:{value:t.controls.normalize,callback:function(e){t.$set(t.controls,"normalize",e)},expression:"controls.normalize"}},[t._v(" Normalize ")])],1)]),n("div",{staticClass:"column is-narrow"},[n("b-field",[n("b-radio-button",{attrs:{"native-value":"cases"},model:{value:t.controls.dataView,callback:function(e){t.$set(t.controls,"dataView",e)},expression:"controls.dataView"}},[t._v(" Cases ")]),n("b-radio-button",{attrs:{"native-value":"deaths"},model:{value:t.controls.dataView,callback:function(e){t.$set(t.controls,"dataView",e)},expression:"controls.dataView"}},[t._v(" Deaths ")])],1)],1),n("div",{staticClass:"column is-narrow"},[n("b-field",[n("b-radio-button",{attrs:{"native-value":"movingDaily"},model:{value:t.controls.count,callback:function(e){t.$set(t.controls,"count",e)},expression:"controls.count"}},[t._v(" Daily ")]),n("b-radio-button",{attrs:{"native-value":"cumulative"},model:{value:t.controls.count,callback:function(e){t.$set(t.controls,"count",e)},expression:"controls.count"}},[t._v(" Cumulative ")])],1)],1)])])])}),_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"has-text-centered"},[t._v(" Loading data... ")])])}],g=(n("4de4"),n("c740"),n("d81d"),n("dca8"),n("96cf"),n("1da1")),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pl-autocomplete"},[n("b-autocomplete",{attrs:{"keep-first":"","clear-on-select":"",data:t.filteredOptions,field:"value",placeholder:"Enter the name of a country, or a state or county in the US"},on:{select:t.selected},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)},y=[],C=(n("13d5"),n("b0c0"),n("ac1f"),n("1276"),n("498a"),n("b0ef")),O=n("a385"),x={name:"Complete",props:{options:Array},data:function(){return{name:""}},computed:{preProcessedOptions:function(){return this.options.reduce((function(t,e){return t.push({id:e.id,value:e.value,parts:e.value.split(",").map((function(t){return t.trim().toLowerCase()}))}),t}),[])},filteredOptions:function(){if(this.name.length<2)return[];var t=Object(C["a"])(this.name.toLowerCase());return this.preProcessedOptions.filter((function(e){return Object(O["a"])(t)(e.parts)})).sort(this.compareOptions)}},methods:{selected:function(t){null!==t&&this.$emit("selected",this.options[t.id])},compareOptions:function(t,e){return t.parts.length-e.parts.length}}},k=x,j=Object(u["a"])(k,w,y,!1,null,"7b5774e6",null),S=j.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pl-chart"},[n("div",{ref:"chart",attrs:{id:"chart"}})])},A=[],$=(n("d3b7"),n("ddb0"),n("5698")),I=n("5470"),P={name:"Chart",props:{data:Array,controls:Object},data:function(){return{width:800}},mounted:function(){this.width=this.$refs.chart.parentNode.clientWidth},watch:{data:function(){this.redraw()},controls:{handler:function(){this.redraw()},deep:!0}},computed:{},methods:{redraw:function(){if(this.$refs.chart.innerHTML="",0!==this.data.length){var t={cases:{daily:"newCases",movingDaily:"movingNewCases",cumulative:"cases"},deaths:{daily:"newDeaths",movingDaily:"movingNewDeaths",cumulative:"deaths"}},e=t[this.controls.dataView][this.controls.count],n=this.controls.logScale?"log":"linear",a=this.controls.logScale?1:0,r=function(t){return 1e5*t[e]/t.population},s=function(t){return t[e]},o=this.controls.normalize?r:s,c=this.data.map((function(t){return t.data.values.map((function(t){return{date:t.date,value:o(t)}})).filter((function(t){return t.value>=a}))})),i=this.data.map((function(t){return t.data.key})),u=this.data.map((function(t){return $["schemeTableau10"][t.id%10]})),l=this.width>400?150:50,d=this.width>400?200:50,f=.5*(this.width-d);I["data_graphic"]({data:c,width:this.width,height:f,left:l,right:d,top:30,small_height_threshold:200,small_width_threshold:400,target:"#chart",x_accessor:"date",y_accessor:"value",colors:u,legend:i,aggregate_rollover:!0,mouseover_align:"left",y_extended_ticks:!0,y_scale_type:n,brush:"x"})}}}},R=P,E=Object(u["a"])(R,D,A,!1,null,null,null),V=E.exports,z=(n("99af"),n("a15b"),n("fb6a"),n("b85c")),T=function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=L(),n=M(),a=N(),r=U(),t.t0=[],t.next=7,e;case 7:return t.t1=t.sent,t.next=10,n;case 10:return t.t2=t.sent,t.next=13,a;case 13:return t.t3=t.sent,s=t.t0.concat.call(t.t0,t.t1,t.t2,t.t3).sort(K),F(s),t.t4=G,t.t5=s,t.next=20,r;case 20:return t.t6=t.sent,(0,t.t4)(t.t5,t.t6),t.abrupt("return",Object.freeze(s));case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$["csv"]("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv",(function(t){return t.date=J(t.date),t.cases=parseInt(t.cases),t.deaths=parseInt(t.deaths),t}));case 2:return e=t.sent,t.abrupt("return",H((function(t){return"".concat(t.state,", US")}))(e));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$["csv"]("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv",(function(t){return t.date=J(t.date),t.cases=parseInt(t.cases),t.deaths=parseInt(t.deaths),t}));case 2:return e=t.sent,t.abrupt("return",H((function(t){return"".concat(t.county,", ").concat(t.state,", US")}))(e));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=$["csv"]("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"),n=$["csv"]("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"),t.t0=$,t.next=5,e;case 5:return t.t1=t.sent,t.next=8,n;case 8:return t.t2=t.sent,a=t.t0.zip.call(t.t0,t.t1,t.t2),t.next=12,e;case 12:return r=t.sent.columns.slice(4),s=function(t){var e=t["Country/Region"],n=t["Province/State"];return[n,e].filter((function(t){return t.length>0})).join(", ")},o=function(t,e){return r.map((function(n){return{date:q(n),cases:parseInt(t[n]),deaths:parseInt(e[n])}}))},c=function(t,e){return{key:s(t),values:o(t,e)}},t.abrupt("return",a.map((function(t){return c(t[0],t[1])})));case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){return $["csv"]("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/UID_ISO_FIPS_LookUp_Table.csv")},G=function(t,e){var n,a=e.reduce((function(t,e){return t[e["Combined_Key"]]=parseInt(e["Population"]),t}),{}),r=Object(z["a"])(t);try{for(r.s();!(n=r.n()).done;){var s=n.value,o=a[s.key];if(void 0!=o){var c,i=Object(z["a"])(s.values);try{for(i.s();!(c=i.n()).done;){var u=c.value;u.population=o}}catch(l){i.e(l)}finally{i.f()}}}}catch(l){r.e(l)}finally{r.f()}},F=function(t){var e,n=Object(z["a"])(t);try{for(n.s();!(e=n.n()).done;)for(var a=e.value,r=0,s=0,o=0,c=0,i=0,u=a.values.length;i<u;i++){var l=a.values[i];l.newCases=l.cases-r,l.newDeaths=l.deaths-s,r=l.cases,s=l.deaths,o+=l.newCases,c+=l.newDeaths,l.movingNewCases=o/Math.min(i+1,7),l.movingNewDeaths=c/Math.min(i+1,7),i>=6&&(o-=a.values[i-6].newCases,c-=a.values[i-6].newDeaths)}}catch(d){n.e(d)}finally{n.f()}},H=function(t){return function(e){return $["nest"]().key(t).entries(e)}},J=$["utcParse"]("%Y-%m-%d"),q=$["utcParse"]("%m/%d/%y"),K=function(t,e){var n=t.key,a=e.key;return n<a?-1:n>a?1:0},W=T,Y={name:"PrettyLines",components:{Autocomplete:S,Chart:V},data:function(){return{loading:!0,data:[],autocompleteOptions:[],selectedAreas:[],selectedAreasTotalCounter:0,controls:{logScale:!1,normalize:!1,dataView:"cases",count:"cumulative"}}},mounted:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},computed:{chartData:function(){var t=this;return this.selectedAreas.map((function(e){return{id:e.id,data:t.data[e.area.id]}}))}},methods:{loadData:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:n=e.sent,t.autocompleteOptions=Object.freeze(n.map((function(t,e){return{id:e,value:t.key}}))),t.data=Object.freeze(n);case 5:case"end":return e.stop()}}),e)})))()},addArea:function(t){-1===this.selectedAreas.findIndex((function(e){return e.area.id===t.id}))&&(this.selectedAreasTotalCounter++,this.selectedAreas.push({id:this.selectedAreasTotalCounter-1,area:t}))},removeArea:function(t){this.selectedAreas=this.selectedAreas.filter((function(e){return e.id!==t}))},strokeColor:function(t){return $["schemeTableau10"][t%10]}}},B=Y,Q=(n("e683"),Object(u["a"])(B,b,_,!1,null,"daf38e58",null)),X=Q.exports,Z={name:"App",components:{Footer:f,PrettyLines:X}},tt=Z,et=(n("5c0b"),Object(u["a"])(tt,s,o,!1,null,null,null)),nt=et.exports;n("eb46"),n("5abe"),n("ae12");a["a"].use(r["a"]),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(nt)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"9c0c":function(t,e,n){},c224:function(t,e,n){},e683:function(t,e,n){"use strict";var a=n("e850"),r=n.n(a);r.a},e850:function(t,e,n){},f73f:function(t,e,n){"use strict";var a=n("c224"),r=n.n(a);r.a}});
//# sourceMappingURL=app.7b06f330.js.map